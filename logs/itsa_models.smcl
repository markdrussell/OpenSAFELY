{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/logs/itsa_models.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}31 Mar 2022, 20:59:49
{txt}
{com}. 
. **Set Ado file path
. adopath + "$projectdir/analysis/extra_ados"
{txt}  [1]  (BASE)      "{res}C:\Program Files\Stata17\ado\base/{txt}"
  [2]  (SITE)      "{res}C:\Program Files\Stata17\ado\site/{txt}"
  [3]              "{res}.{txt}"
  [4]  (PERSONAL)  "{res}C:\Users\k1754142\ado\personal/{txt}"
  [5]  (PLUS)      "{res}C:\Users\k1754142\ado\plus/{txt}"
  [6]  (OLDPLACE)  "{res}c:\ado/{txt}"
  [7]              "{res}C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/analysis/extra_ados{txt}"

{com}. 
. **Use cleaned data from previous step
. use "$projectdir/output/data/file_eia_all.dta", clear
{txt}
{com}. 
. set scheme plotplainblind
{txt}
{com}. 
. /*ITSA models===========================================================================*/
. 
. **Delay from rheum referral to rheum appt (all diagnoses)
. preserve
{txt}
{com}. asdoc tabstat time_ref_rheum_appt, by(mo_year_diagn) stat(count p50 p75 p25 mean sd) save($projectdir/output/tables/diagnostic_delay_all.doc) dec(0)

{txt}Summary for variables: time_ref_rheum_appt
Group variable: __000000 (mo_year_diagn)

{ralign 8:__000000} {...}
{c |}         N       p50       p75       p25      Mean        SD
{hline 9}{c +}{hline 60}
{ralign 8:710} {...}
{c |}{...}
 {res}       47       135       199        36  123.5532  87.34709
{txt}{ralign 8:711} {...}
{c |}{...}
 {res}       41       103       181        41  127.0976  98.04203
{txt}{ralign 8:712} {...}
{c |}{...}
 {res}       48     102.5       148      50.5  119.0833  91.05244
{txt}{ralign 8:713} {...}
{c |}{...}
 {res}       62     121.5       256        59  161.6774  118.7022
{txt}{ralign 8:714} {...}
{c |}{...}
 {res}       66       142       240        61  151.1212  107.2426
{txt}{ralign 8:715} {...}
{c |}{...}
 {res}       76       151       268        84  177.1316  118.4591
{txt}{ralign 8:716} {...}
{c |}{...}
 {res}       77       156       251        72  177.7532  121.6361
{txt}{ralign 8:717} {...}
{c |}{...}
 {res}       73       138       242        73  174.1233  134.4351
{txt}{ralign 8:718} {...}
{c |}{...}
 {res}       85       181       316        87  210.0588  145.8846
{txt}{ralign 8:719} {...}
{c |}{...}
 {res}       99       134       249        54  164.2525  129.8743
{txt}{ralign 8:720} {...}
{c |}{...}
 {res}      105       164       305        71  191.7524  153.1806
{txt}{ralign 8:721} {...}
{c |}{...}
 {res}      117       199       362       114  244.4872  168.6321
{txt}{ralign 8:722} {...}
{c |}{...}
 {res}      105       157       301        72  209.1619   168.002
{txt}{ralign 8:723} {...}
{c |}{...}
 {res}      120     212.5       348        82   233.075   169.867
{txt}{ralign 8:724} {...}
{c |}{...}
 {res}      133       200       388        90  248.0977  182.7807
{txt}{ralign 8:725} {...}
{c |}{...}
 {res}      119       190       302        84  228.5126  182.2595
{txt}{ralign 8:726} {...}
{c |}{...}
 {res}      133       195       412        86  258.9173  197.0702
{txt}{ralign 8:727} {...}
{c |}{...}
 {res}      159       207       371       103   253.805  188.9781
{txt}{ralign 8:728} {...}
{c |}{...}
 {res}      149       225       378        98  254.6779  189.7593
{txt}{ralign 8:729} {...}
{c |}{...}
 {res}      159       229       442       106  282.3899  213.1138
{txt}{ralign 8:730} {...}
{c |}{...}
 {res}      187       249       404       121  283.4171  202.2649
{txt}{ralign 8:731} {...}
{c |}{...}
 {res}      185       267       385       122  285.9189  202.8678
{txt}{ralign 8:732} {...}
{c |}{...}
 {res}      183       250       397       116  292.2623  216.6389
{txt}{ralign 8:733} {...}
{c |}{...}
 {res}      158     214.5       440        92  287.9304  232.1612
{txt}{ralign 8:734} {...}
{c |}{...}
 {res}      180     243.5     445.5       113  299.6778  235.7466
{txt}{ralign 8:735} {...}
{c |}{...}
 {res}      185       223       432       110  298.4595  242.5463
{txt}{ralign 8:736} {...}
{c |}{...}
 {res}      176     269.5       470       114  320.2727  251.4221
{txt}{ralign 8:737} {...}
{c |}{...}
 {res}      198       271       493       130  331.2576  249.4472
{txt}{ralign 8:738} {...}
{c |}{...}
 {res}      193       268       467       107  315.4145  245.6319
{txt}{ralign 8:739} {...}
{c |}{...}
 {res}      214     310.5       536       141  362.1869  272.1433
{txt}{ralign 8:740} {...}
{c |}{...}
 {res}      219       288       536       146  351.0091  259.2501
{txt}{ralign 8:741} {...}
{c |}{...}
 {res}      234     276.5       495       133  345.7735  271.3238
{txt}{ralign 8:742} {...}
{c |}{...}
 {res}      218     245.5       530       119  332.2202  272.3735
{txt}{ralign 8:743} {...}
{c |}{...}
 {res}      213       315       516       140  357.9061   266.304
{txt}{ralign 8:744} {...}
{c |}{...}
 {res}      230       347       507       159  388.7087   294.572
{txt}{ralign 8:745} {...}
{c |}{...}
 {res}      206     292.5       571       120   375.432  310.2694
{txt}{ralign 8:746} {...}
{c |}{...}
 {res}      224       301     515.5       142  363.2455  290.7751
{txt}{ralign 8:747} {...}
{c |}{...}
 {res}       98       328       602       172  402.4592  305.9209
{txt}{hline 9}{c +}{hline 60}
{ralign 8:Total} {...}
{c |}{...}
 {res}     5474       230       417       104  291.4805  239.1462
{txt}{hline 9}{c BT}{hline 60}
{res}{txt}{p 0 4 2}
(file {bf}
C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/output/tables/diagnostic_delay_all.doc{rm}
not found)
{p_end}
{res}Click to Open File:  {browse "C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/output/tables/diagnostic_delay_all.doc"}
{txt}
{com}. keep if time_ref_rheum_appt!=. //drop those with no rheum ref and/or rheum appt
{txt}(28,789 observations deleted)

{com}. collapse (p50) p50_diag_delay=time_ref_rheum_appt (p75) p75_diag_delay=time_ref_rheum_appt (p25) p25_diag_delay=time_ref_rheum_appt (mean) mean_diag_delay=time_ref_rheum_appt (sd) sd_diag_delay=time_ref_rheum_appt (count) n_diag_delay=time_ref_rheum_appt, by(mo_year_diagn)
{res}{txt}
{com}. 
. tsset mo_year_diagn
{res}
{p 0 15 2}{txt:Time variable: }{res:mo_year_diagn}{txt:, }{res:{bind:2019m3}}{txt: to }{res:{bind:2022m4}}{p_end}
{txt}{col 9}Delta: {res}1 month
{txt}
{com}. 
. **Newey Standard Errors with 6 lags
. itsa p50_diag_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to diagnosis, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_diagnostic_delay_newey.gph", replace)) posttrend 


{res}
{p 0 15 2}{txt:Time variable: }{res:mo_year_diagn}{txt:, }{res:{bind:2019m3}}{txt: to }{res:{bind:2022m4}}{p_end}
{txt}{col 9}Delta: {res}1 month

{txt}Regression with Newey–West standard errors{col 49}Number of obs{col 67}= {res}        37
{txt}Maximum lag = {res}6{col 49}{txt}F(  3,        33){col 67}= {res}    524.20
{col 49}{txt}Prob > F{col 67}= {res}    0.0000

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}  Newey–West
{col 1}_p50_diag_~y{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 10}_t {c |}{col 14}{res}{space 2} 6.167832{col 26}{space 2} .8483443{col 37}{space 1}    7.27{col 46}{space 3}0.000{col 54}{space 4} 4.441863{col 67}{space 3} 7.893802
{txt}{space 4}_x2020m3 {c |}{col 14}{res}{space 2} 1.123193{col 26}{space 2} 8.229109{col 37}{space 1}    0.14{col 46}{space 3}0.892{col 54}{space 4}-15.61906{col 67}{space 3} 17.86544
{txt}{space 2}_x_t2020m3 {c |}{col 14}{res}{space 2}-.7720629{col 26}{space 2}   .86012{col 37}{space 1}   -0.90{col 46}{space 3}0.376{col 54}{space 4} -2.52199{col 67}{space 3} .9778643
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 109.9936{col 26}{space 2} 5.218067{col 37}{space 1}   21.08{col 46}{space 3}0.000{col 54}{space 4} 99.37735{col 67}{space 3} 120.6098
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}


{col 20} Postintervention Linear Trend: 2020m3

Treated: _b[_t]+_b[_x_t2020m3]
{hline 13}{c TT}{hline 64}
Linear Trend {c |}{col 21}Coef. {col 29}Std. Err.{col 44}t{col 49}{col 59}[95% Conf. Interval]
{hline 13}{c +}{hline 64}
{col 1}     Treated{col 14}{c |}{res}{col 17} 5.395769{col 28}  .335468{col 38}   16.08{col 46}   0.000{col 58} 4.713254{col 70} 6.078284
{txt}{hline 13}{c BT}{hline 64}
{p 0 4 2}
{txt}(note:  named style
v.small not found in class
gsize,  default attributes used)
{p_end}
{res}{txt}file {bf:C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/output/figures/ITSA_diagnostic_delay_newey.gph} saved

{com}.         graph export "$projectdir/output/figures/ITSA_diagnostic_delay_newey.svg", as(svg) replace
{txt}{p 0 4 2}
file {bf}
C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/output/figures/ITSA_diagnostic_delay_newey.svg{rm}
saved as
SVG
format
{p_end}

{com}. actest, lag(18) 

{txt}Cumby-Huizinga test for autocorrelation (Breusch-Godfrey)
  H0: variable is MA process up to order q
  HA: serial correlation present at specified lags >q
{hline 41}{c TT}{hline 35}
  H0: q=0 (serially uncorrelated){col 42}{c |}  H0: q=specified lag-1
  HA: s.c. present at range specified{col 42}{c |}  HA: s.c. present at lag specified
{hline 11}{c TT}{hline 29}{c +}{hline 5}{c TT}{hline 29}
{col 5}lags{col 12}{c |}{col 19}chi2{col 29}df{col 36}p-val{col 42}{c |}{col 44}lag{col 48}{c |}{col 55}chi2{col 65}df{col 72}p-val
{hline 11}{c +}{hline 29}{c +}{hline 5}{c +}{hline 29}
{res}{col 2}  1{txt}{col 6}-{res}{col 7}  1{txt}{col 12}{c |}{res}{col 17}  0.128{col 30}1{col 35}0.7203{txt}{col 42}{c |}{res}{col 44}  1{txt}{col 48}{c |}{res}{col 53}  0.128{col 66}1{col 71}0.7203
{col 2}  1{txt}{col 6}-{res}{col 7}  2{txt}{col 12}{c |}{res}{col 17}  2.954{col 30}2{col 35}0.2283{txt}{col 42}{c |}{res}{col 44}  2{txt}{col 48}{c |}{res}{col 53}  2.693{col 66}1{col 71}0.1008
{col 2}  1{txt}{col 6}-{res}{col 7}  3{txt}{col 12}{c |}{res}{col 17}  3.771{col 30}3{col 35}0.2873{txt}{col 42}{c |}{res}{col 44}  3{txt}{col 48}{c |}{res}{col 53}  0.498{col 66}1{col 71}0.4805
{col 2}  1{txt}{col 6}-{res}{col 7}  4{txt}{col 12}{c |}{res}{col 17}  7.600{col 30}4{col 35}0.1074{txt}{col 42}{c |}{res}{col 44}  4{txt}{col 48}{c |}{res}{col 53}  1.637{col 66}1{col 71}0.2007
{col 2}  1{txt}{col 6}-{res}{col 7}  5{txt}{col 12}{c |}{res}{col 17}  7.967{col 30}5{col 35}0.1581{txt}{col 42}{c |}{res}{col 44}  5{txt}{col 48}{c |}{res}{col 53}  0.085{col 66}1{col 71}0.7704
{col 2}  1{txt}{col 6}-{res}{col 7}  6{txt}{col 12}{c |}{res}{col 17} 13.408{col 30}6{col 35}0.0370{txt}{col 42}{c |}{res}{col 44}  6{txt}{col 48}{c |}{res}{col 53}  0.701{col 66}1{txt}*{res}{col 71}0.4026
{col 2}  1{txt}{col 6}-{res}{col 7}  7{txt}{col 12}{c |}{res}{col 17} 13.562{col 30}7{col 35}0.0595{txt}{col 42}{c |}{res}{col 44}  7{txt}{col 48}{c |}{res}{col 53}  1.270{col 66}1{col 71}0.2597
{col 2}  1{txt}{col 6}-{res}{col 7}  8{txt}{col 12}{c |}{res}{col 17} 13.794{col 30}8{col 35}0.0873{txt}{col 42}{c |}{res}{col 44}  8{txt}{col 48}{c |}{res}{col 53}  2.840{col 66}1{txt}*{res}{col 71}0.0919
{col 2}  1{txt}{col 6}-{res}{col 7}  9{txt}{col 12}{c |}{res}{col 17} 13.811{col 30}9{col 35}0.1292{txt}{col 42}{c |}{res}{col 44}  9{txt}{col 48}{c |}{res}{col 53}  0.052{col 66}1{col 71}0.8200
{col 2}  1{txt}{col 6}-{res}{col 7} 10{txt}{col 12}{c |}{res}{col 17} 14.711{col 30}10{col 35}0.1430{txt}{col 42}{c |}{res}{col 44} 10{txt}{col 48}{c |}{res}{col 53}  0.374{col 66}1{col 71}0.5411
{col 2}  1{txt}{col 6}-{res}{col 7} 11{txt}{col 12}{c |}{res}{col 17} 15.524{col 30}11{col 35}0.1597{txt}{col 42}{c |}{res}{col 44} 11{txt}{col 48}{c |}{res}{col 53}  0.972{col 66}1{col 71}0.3242
{col 2}  1{txt}{col 6}-{res}{col 7} 12{txt}{col 12}{c |}{res}{col 17} 19.705{col 30}12{col 35}0.0729{txt}{col 42}{c |}{res}{col 44} 12{txt}{col 48}{c |}{res}{col 53}  1.416{col 66}1{txt}*{res}{col 71}0.2340
{col 2}  1{txt}{col 6}-{res}{col 7} 13{txt}{col 12}{c |}{res}{col 17} 20.157{col 30}13{col 35}0.0914{txt}{col 42}{c |}{res}{col 44} 13{txt}{col 48}{c |}{res}{col 53}  2.429{col 66}1{txt}*{res}{col 71}0.1191
{col 2}  1{txt}{col 6}-{res}{col 7} 14{txt}{col 12}{c |}{res}{col 17} 21.012{col 30}14{col 35}0.1013{txt}{col 42}{c |}{res}{col 44} 14{txt}{col 48}{c |}{res}{col 53}  0.016{col 66}1{txt}*{res}{col 71}0.9005
{col 2}  1{txt}{col 6}-{res}{col 7} 15{txt}{col 12}{c |}{res}{col 17} 22.529{col 30}15{col 35}0.0947{txt}{col 42}{c |}{res}{col 44} 15{txt}{col 48}{c |}{res}{col 53}  0.003{col 66}1{col 71}0.9554
{col 2}  1{txt}{col 6}-{res}{col 7} 16{txt}{col 12}{c |}{res}{col 17} 22.627{col 30}16{col 35}0.1241{txt}{col 42}{c |}{res}{col 44} 16{txt}{col 48}{c |}{res}{col 53}  2.539{col 66}1{col 71}0.1111
{col 2}  1{txt}{col 6}-{res}{col 7} 17{txt}{col 12}{c |}{res}{col 17} 23.146{col 30}17{col 35}0.1445{txt}{col 42}{c |}{res}{col 44} 17{txt}{col 48}{c |}{res}{col 53}  1.683{col 66}1{txt}*{res}{col 71}0.1945
{col 2}  1{txt}{col 6}-{res}{col 7} 18{txt}{col 12}{c |}{res}{col 17} 23.608{col 30}18{col 35}0.1683{txt}{col 42}{c |}{res}{col 44} 18{txt}{col 48}{c |}{res}{col 53}  0.230{col 66}1{col 71}0.6315
{txt}{hline 11}{c BT}{hline 29}{c BT}{hline 5}{c BT}{hline 29}
  Test allows predetermined regressors/instruments
  Test requires conditional homoskedasticity
  * Eigenvalues adjusted to make matrix positive semidefinite

{com}. 
. **Prais-Winsten 
. itsa p50_diag_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to diagnosis, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_diagnostic_delay_prais.gph", replace)) posttrend 


{res}
{p 0 15 2}{txt:Time variable: }{res:mo_year_diagn}{txt:, }{res:{bind:2019m3}}{txt: to }{res:{bind:2022m4}}{p_end}
{txt}{col 9}Delta: {res}1 month

{txt}Iteration 0:   rho = {res}0.0000
{txt}Iteration 1:   rho = {res}-0.0581
{txt}Iteration 2:   rho = {res}-0.0610
{txt}Iteration 3:   rho = {res}-0.0611
{txt}Iteration 4:   rho = {res}-0.0611
{txt}Iteration 5:   rho = {res}-0.0611

{txt}Prais–Winsten AR(1) regression with iterated estimates

Linear regression                               Number of obs     = {res}        37
                                                {txt}F(3, 33)          =  {res}   105.09
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.9095
                                                {txt}Root MSE          =    {res} 21.462

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}  Semirobust
{col 1}_p50_diag_~y{col 14}{c |} Coefficient{col 26}  std. err.{col 38}      t{col 46}   P>|t|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 10}_t {c |}{col 14}{res}{space 2} 6.119718{col 26}{space 2} 1.669302{col 37}{space 1}    3.67{col 46}{space 3}0.001{col 54}{space 4} 2.723498{col 67}{space 3} 9.515938
{txt}{space 4}_x2020m3 {c |}{col 14}{res}{space 2} 2.147561{col 26}{space 2} 14.44332{col 37}{space 1}    0.15{col 46}{space 3}0.883{col 54}{space 4} -27.2376{col 67}{space 3} 31.53272
{txt}{space 2}_x_t2020m3 {c |}{col 14}{res}{space 2}-.7425619{col 26}{space 2} 1.780084{col 37}{space 1}   -0.42{col 46}{space 3}0.679{col 54}{space 4} -4.36417{col 67}{space 3} 2.879047
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 109.9103{col 26}{space 2} 9.838117{col 37}{space 1}   11.17{col 46}{space 3}0.000{col 54}{space 4} 89.89453{col 67}{space 3} 129.9261
{txt}{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
         rho {c |}  {res}-.0611349
{txt}{hline 13}{c BT}{hline 64}
Durbin–Watson statistic (original)    = {res}2.062984
{txt}Durbin–Watson statistic (transformed) = {res}1.979265


{txt}{col 20} Postintervention Linear Trend: 2020m3

Treated: _b[_t]+_b[_x_t2020m3]
{hline 13}{c TT}{hline 64}
Linear Trend {c |}{col 21}Coef. {col 29}Std. Err.{col 44}t{col 49}{col 59}[95% Conf. Interval]
{hline 13}{c +}{hline 64}
{col 1}     Treated{col 14}{c |}{res}{col 17} 5.377156{col 28} .6206129{col 38}    8.66{col 46}   0.000{col 58}  4.11451{col 70} 6.639803
{txt}{hline 13}{c BT}{hline 64}
{p 0 4 2}
{txt}(note:  named style
v.small not found in class
gsize,  default attributes used)
{p_end}
{res}{txt}file {bf:C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/output/figures/ITSA_diagnostic_delay_prais.gph} saved

{com}.         graph export "$projectdir/output/figures/ITSA_diagnostic_delay_prais.svg", as(svg) replace      
{txt}{p 0 4 2}
file {bf}
C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/output/figures/ITSA_diagnostic_delay_prais.svg{rm}
saved as
SVG
format
{p_end}

{com}. restore
{txt}
{com}. 
. /*
> **Time from last GP appt to rheum referral (all diagnoses)
> preserve
> keep if time_gp_rheum_ref_appt!=. //drop those with no last GP appt and/or rheum ref
> collapse (p50) p50_ref_delay=time_gp_rheum_ref_appt (p75) p75_ref_delay=time_gp_rheum_ref_appt (p25) p25_ref_delay=time_gp_rheum_ref_appt (mean) mean_ref_delay=time_gp_rheum_ref_appt (sd) sd_ref_delay=time_gp_rheum_ref_appt (count) n_ref_delay=time_gp_rheum_ref_appt, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_ref_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to referral, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_referral_delay_newey.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_referral_delay_newey.svg", as(svg) replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_ref_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to referral, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_referral_delay_prais.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_referral_delay_prais.svg", as(svg) replace        
> restore
> 
> **Delay from rheum appt to shared care csDMARD for RA patients (not including MTX high-cost drug) - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_csdmard!=. & ra_code==1 //drop those with no rheum appt and/or csDMARD prescription
> collapse (p50) p50_csdmard_delay=time_to_csdmard (p75) p75_csdmard_delay=time_to_csdmard (p25) p25_csdmard_delay=time_to_csdmard (mean) mean_csdmard_delay=time_to_csdmard (sd) sd_csdmard_delay=time_to_csdmard (count) n_csdmard_delay=time_to_csdmard, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_csdmard_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to csDMARD, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_csDMARD_delay_newey.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_csDMARD_delay_newey_ra.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_csdmard_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to csDMARD, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_csDMARD_delay_prais.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_csDMARD_delay_prais_ra.tif", replace      
> restore
> 
> **Delay from rheum appt to shared care csDMARD for PsA patients (not including MTX high-cost drug) - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_csdmard!=. & psa_code==1 //drop those with no rheum appt and/or csDMARD prescription
> collapse (p50) p50_csdmard_delay=time_to_csdmard (p75) p75_csdmard_delay=time_to_csdmard (p25) p25_csdmard_delay=time_to_csdmard (mean) mean_csdmard_delay=time_to_csdmard (sd) sd_csdmard_delay=time_to_csdmard (count) n_csdmard_delay=time_to_csdmard, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_csdmard_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to csDMARD, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_csDMARD_delay_newey.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_csDMARD_delay_newey_psa.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_csdmard_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to csDMARD, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_csDMARD_delay_prais.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_csDMARD_delay_prais_psa.tif", replace     
> restore
> 
> **Delay from rheum appt to shared care MTX for RA patients (not including MTX high-cost drug) - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_mtx!=. & ra_code==1 //drop those with no rheum appt and/or MTX prescription
> collapse (p50) p50_mtx_delay=time_to_mtx (p75) p75_mtx_delay=time_to_mtx (p25) p25_mtx_delay=time_to_mtx (mean) mean_mtx_delay=time_to_mtx (sd) sd_mtx_delay=time_to_mtx (count) n_mtx_delay=time_to_mtx, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_mtx_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to methotrexate, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_mtx_delay_newey_ra.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_mtx_delay_newey_ra.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_mtx_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to methotrexate, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_mtx_delay_prais_ra.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_mtx_delay_prais_ra.tif", replace  
> restore
> 
> **Delay from rheum appt to shared care MTX for PsA patients (not including MTX high-cost drug) - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_mtx!=. & psa_code==1 //drop those with no rheum appt and/or mtx prescription
> collapse (p50) p50_mtx_delay=time_to_mtx (p75) p75_mtx_delay=time_to_mtx (p25) p25_mtx_delay=time_to_mtx (mean) mean_mtx_delay=time_to_mtx (sd) sd_mtx_delay=time_to_mtx (count) n_mtx_delay=time_to_mtx, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_mtx_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to methotrexate, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_mtx_delay_newey_psa.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_mtx_delay_newey_psa.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_mtx_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to methotrexate, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_mtx_delay_prais_psa.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_mtx_delay_prais_psa.tif", replace 
> restore
> 
> **Delay from rheum appt to biologic for RA patients - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_biologic!=. & ra_code==1 //drop those with no rheum appt and/or biologic prescription
> collapse (p50) p50_biologic_delay=time_to_biologic (p75) p75_biologic_delay=time_to_biologic (p25) p25_biologic_delay=time_to_biologic (mean) mean_biologic_delay=time_to_biologic (sd) sd_biologic_delay=time_to_biologic (count) n_biologic_delay=time_to_biologic, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_biologic_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to biologic, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_biologic_delay_newey_ra.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_biologic_delay_newey_ra.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_biologic_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to biologic, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_biologic_delay_prais_ra.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_biologic_delay_prais_ra.tif", replace     
> restore
> 
> **Delay from rheum appt to biologic for PsA patients - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_biologic!=. & psa_code==1 //drop those with no rheum appt and/or biologic prescription - may need to cut sooner to give sufficient time for DMARD
> collapse (p50) p50_biologic_delay=time_to_biologic (p75) p75_biologic_delay=time_to_biologic (p25) p25_biologic_delay=time_to_biologic (mean) mean_biologic_delay=time_to_biologic (sd) sd_biologic_delay=time_to_biologic (count) n_biologic_delay=time_to_biologic, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_biologic_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to biologic, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_biologic_delay_newey_psa.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_biologic_delay_newey_psa.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_biologic_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to biologic, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_biologic_delay_prais_psa.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_biologic_delay_prais_psa.tif", replace    
> restore
> 
> **Delay from rheum appt to biologic for AxSpA patients - may need to cut sooner to give sufficient time for DMARD
> preserve
> keep if time_to_biologic!=. & anksp_code==1 //drop those with no rheum appt and/or biologic prescription - may need to cut sooner to give sufficient time for DMARD
> collapse (p50) p50_biologic_delay=time_to_biologic (p75) p75_biologic_delay=time_to_biologic (p25) p25_biologic_delay=time_to_biologic (mean) mean_biologic_delay=time_to_biologic (sd) sd_biologic_delay=time_to_biologic (count) n_biologic_delay=time_to_biologic, by(mo_year_diagn)
> 
> tsset mo_year_diagn
> 
> **Newey Standard Errors with 6 lags
> itsa p50_biologic_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) lag(6) replace figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to biologic, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small)) legend(off) saving("$projectdir/output/figures/ITSA_biologic_delay_newey_anksp.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_biologic_delay_newey_anksp.tif", replace
> actest, lag(18) 
> 
> **Prais-Winsten 
> itsa p50_biologic_delay if inrange(mo_year_diagn, tm(2019m3), tm(2022m3)), single trperiod(2020m3) replace prais rhotype(tscorr) vce(robust) figure(title("", size(small)) subtitle("", size(medsmall)) ytitle("Median time to biologic, days", size(medsmall) margin(small)) ylabel(, nogrid) xtitle("Date of diagnosis", size(medsmall) margin(medsmall)) xlabel(710 "Mar 2019" 716 "Sep 2019" 722 "Mar 2020" 728 "Sep 2020" 734 "Mar 2021" 740 "Sep 2021" 746 "Mar 2022", nogrid) note("", size(v.small))  legend(off) saving("$projectdir/output/figures/ITSA_biologic_delay_prais_anksp.gph", replace)) posttrend 
>         graph export "$projectdir/output/figures/ITSA_biologic_delay_prais_anksp.tif", replace  
> restore
> */
. 
. log close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}C:\Users\k1754142\OneDrive\PhD Project\OpenSAFELY\Github Practice/logs/itsa_models.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}31 Mar 2022, 21:00:11
{txt}{.-}
{smcl}
{txt}{sf}{ul off}